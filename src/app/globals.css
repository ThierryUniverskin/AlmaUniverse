@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Premium clinical color tokens */
    --color-background: theme('colors.ivory.100');
    --color-surface: theme('colors.white');
    --color-surface-elevated: theme('colors.white');
    --color-border: theme('colors.stone.200');
    --color-border-subtle: theme('colors.ivory.400');

    --color-text-primary: theme('colors.stone.900');
    --color-text-secondary: theme('colors.stone.600');
    --color-text-tertiary: theme('colors.stone.500');
    --color-text-muted: theme('colors.stone.400');

    --color-accent: theme('colors.purple.700');
    --color-accent-hover: theme('colors.purple.800');
    --color-accent-subtle: theme('colors.purple.50');

    /* Timing tokens */
    --transition-fast: 150ms;
    --transition-normal: 250ms;
    --transition-slow: 400ms;
    --ease-smooth: cubic-bezier(0.4, 0, 0.2, 1);
    --ease-gentle: cubic-bezier(0.25, 0.1, 0.25, 1);
  }

  html {
    @apply antialiased;
    font-feature-settings: "cv02", "cv03", "cv04", "cv11";
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  body {
    @apply bg-ivory-100 text-stone-800 font-sans;
    font-size: 0.9375rem;
    line-height: 1.6;
  }

  /* Premium clinical typography */
  h1 {
    @apply font-display text-3xl font-medium text-stone-900 tracking-tight;
    line-height: 1.2;
  }

  h2 {
    @apply font-display text-2xl font-medium text-stone-900 tracking-tight;
    line-height: 1.25;
  }

  h3 {
    @apply font-sans text-lg font-semibold text-stone-800 tracking-snug;
    line-height: 1.35;
  }

  h4 {
    @apply font-sans text-base font-semibold text-stone-800;
    line-height: 1.4;
  }

  /* Refined link styles */
  a {
    @apply transition-colors duration-250 ease-smooth;
  }

  /* Selection styling */
  ::selection {
    @apply bg-purple-200 text-stone-900;
  }

  /* Refined scrollbar */
  ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  ::-webkit-scrollbar-track {
    @apply bg-transparent;
  }

  ::-webkit-scrollbar-thumb {
    @apply bg-stone-300 rounded-full;
    border: 2px solid transparent;
    background-clip: padding-box;
  }

  ::-webkit-scrollbar-thumb:hover {
    @apply bg-stone-400;
  }
}

@layer components {
  /* Custom checkbox - iOS compatible (accent-color not supported on iOS) */
  .checkbox-custom {
    @apply appearance-none h-4 w-4 rounded border border-stone-300 bg-white cursor-pointer
           transition-all duration-150 ease-in-out flex-shrink-0;
    background-image: none;
  }

  .checkbox-custom:checked {
    @apply bg-purple-600 border-purple-600;
    background-image: url("data:image/svg+xml,%3csvg viewBox='0 0 16 16' fill='white' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M12.207 4.793a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0l-2-2a1 1 0 011.414-1.414L6.5 9.086l4.293-4.293a1 1 0 011.414 0z'/%3e%3c/svg%3e");
    background-size: 100% 100%;
    background-position: center;
    background-repeat: no-repeat;
  }

  .checkbox-custom:focus {
    @apply outline-none ring-2 ring-purple-500/30 ring-offset-1;
  }

  .checkbox-custom:disabled {
    @apply opacity-50 cursor-not-allowed;
  }

  /* Large checkbox variant for better touch targets */
  .checkbox-custom-lg {
    @apply appearance-none h-6 w-6 rounded border border-stone-300 bg-white cursor-pointer
           transition-all duration-150 ease-in-out flex-shrink-0;
    background-image: none;
  }

  .checkbox-custom-lg:checked {
    @apply bg-purple-600 border-purple-600;
    background-image: url("data:image/svg+xml,%3csvg viewBox='0 0 16 16' fill='white' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M12.207 4.793a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0l-2-2a1 1 0 011.414-1.414L6.5 9.086l4.293-4.293a1 1 0 011.414 0z'/%3e%3c/svg%3e");
    background-size: 100% 100%;
    background-position: center;
    background-repeat: no-repeat;
  }

  .checkbox-custom-lg:focus {
    @apply outline-none ring-2 ring-purple-500/30 ring-offset-1;
  }

  .checkbox-custom-lg:disabled {
    @apply opacity-50 cursor-not-allowed;
  }

  /* Premium focus ring - calm and intentional */
  .focus-ring {
    @apply focus:outline-none focus:ring-2 focus:ring-purple-500/25 focus:ring-offset-2 focus:ring-offset-ivory-100;
    transition: box-shadow var(--transition-normal) var(--ease-smooth);
  }

  /* Refined card base */
  .card {
    @apply bg-white rounded-2xl border border-stone-200/60 shadow-soft;
    transition: box-shadow var(--transition-slow) var(--ease-gentle),
                border-color var(--transition-normal) var(--ease-smooth);
  }

  .card:hover {
    @apply shadow-medium border-stone-200;
  }

  /* Premium input base */
  .input-base {
    @apply w-full px-4 py-3 border border-stone-200 rounded-xl bg-white
           text-stone-900 placeholder:text-stone-400
           focus:outline-none focus:ring-2 focus:ring-purple-500/15 focus:border-purple-400
           transition-all duration-250 ease-smooth;
    font-size: 0.9375rem;
    line-height: 1.5;
  }

  .input-base::placeholder {
    @apply text-stone-400;
    font-weight: 400;
  }

  .input-base:hover:not(:focus):not(:disabled) {
    @apply border-stone-300;
  }

  .input-error {
    @apply border-error-500/60 focus:ring-error-500/15 focus:border-error-500;
  }

  /* Premium button base */
  .btn-base {
    @apply inline-flex items-center justify-center gap-2 font-medium rounded-xl
           transition-all duration-250 ease-smooth
           focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-ivory-100
           disabled:opacity-50 disabled:cursor-not-allowed disabled:pointer-events-none;
  }

  /* Divider */
  .divider {
    @apply border-t border-stone-200/60;
  }

  /* Subtle pattern background for premium feel */
  .pattern-bg {
    background-image:
      radial-gradient(circle at 1px 1px, theme('colors.stone.200') 1px, transparent 0);
    background-size: 24px 24px;
  }

  /* Gradient overlays */
  .gradient-fade-b {
    background: linear-gradient(to bottom, transparent, theme('colors.ivory.100'));
  }

  .gradient-fade-t {
    background: linear-gradient(to top, transparent, theme('colors.ivory.100'));
  }
}

@layer utilities {
  /* Safe area padding for iOS devices with notches/home indicators */
  .pb-safe {
    padding-bottom: env(safe-area-inset-bottom, 0);
  }

  /* SVG petal transition for flower visualization */
  .petal-transition {
    transition: d 0.35s cubic-bezier(0.4, 0, 0.2, 1), filter 0.2s ease;
  }

  .petal-hover:hover {
    filter: brightness(1.1);
  }

  /* Hide scrollbar but keep functionality */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  /* Text balance for headings */
  .text-balance {
    text-wrap: balance;
  }

  /* Refined shadows */
  .shadow-clinical {
    box-shadow:
      0 0 0 1px theme('colors.stone.200' / 50%),
      0 1px 2px -1px theme('colors.stone.900' / 5%),
      0 2px 4px -2px theme('colors.stone.900' / 5%);
  }

  /* Glow effects for focus states */
  .glow-purple {
    box-shadow: 0 0 0 3px theme('colors.purple.500' / 15%);
  }

  /* Premium transitions */
  .transition-premium {
    transition: all var(--transition-normal) var(--ease-gentle);
  }

  .transition-slow {
    transition: all var(--transition-slow) var(--ease-gentle);
  }

  /* Animate on mount */
  .animate-mount {
    animation: slideUp 0.5s var(--ease-gentle) forwards;
  }

  /* Stagger animations */
  .stagger-1 { animation-delay: 0.05s; }
  .stagger-2 { animation-delay: 0.1s; }
  .stagger-3 { animation-delay: 0.15s; }
  .stagger-4 { animation-delay: 0.2s; }
  .stagger-5 { animation-delay: 0.25s; }

  /* Line clamp utilities */
  .line-clamp-1 {
    display: -webkit-box;
    -webkit-line-clamp: 1;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
}
